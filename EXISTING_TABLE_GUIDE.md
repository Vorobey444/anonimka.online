# ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≤–∞—à–µ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã

## üéØ –•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `world_chat_messages` - —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ!
–Ø –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª –±–æ—Ç–æ–≤ –ø–æ–¥ –≤–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É `is_bot`

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç SQL –≤ Neon Dashboard:

```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è –¥–ª—è –±–æ—Ç–æ–≤
ALTER TABLE world_chat_messages 
ADD COLUMN IF NOT EXISTS is_bot BOOLEAN DEFAULT FALSE;

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
CREATE INDEX IF NOT EXISTS idx_world_chat_is_bot ON world_chat_messages(is_bot);

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
COMMENT ON COLUMN world_chat_messages.is_bot IS 'TRUE –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏';
```

**–§–∞–π–ª:** `migrations/014_add_is_bot.sql`

---

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ API endpoint

API `world-chat.js` —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω –∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞—à–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `user_token` –≤–º–µ—Å—Ç–æ `userId`
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `nickname` 
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `type` (world/city/private)
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `is_bot`
‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 50 —Å–∏–º–≤–æ–ª–æ–≤ (–∫–∞–∫ –≤ –≤–∞—à–µ–π —Å—Ö–µ–º–µ)

---

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ API

```bash
cd anonimka-nextjs
vercel deploy
# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ git push –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π
```

---

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
cd anon-board-bot
test_bot.bat          # –ü—Ä–æ–≤–µ—Ä–∫–∞
start_activity_bot.bat # –ó–∞–ø—É—Å–∫
```

---

## üîç –û—Ç–ª–∏—á–∏—è –≤–∞—à–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –í–∞—à–∞ —Ç–∞–±–ª–∏—Ü–∞ (–ª—É—á—à–µ!):
```sql
user_token TEXT          -- –≤–º–µ—Å—Ç–æ user_id
nickname VARCHAR(30)     -- –µ—Å—Ç—å –Ω–∏–∫–Ω–µ–π–º!
message TEXT (–º–∞–∫—Å 50)   -- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
type VARCHAR(10)         -- world/city/private
is_bot BOOLEAN           -- –¥–æ–±–∞–≤–∏–ª–∏
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ù–∏–∫–Ω–µ–π–º—ã –±–æ—Ç–æ–≤ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã
‚úÖ –ú–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Ç–∏–ø—ã (–º–∏—Ä/–≥–æ—Ä–æ–¥/–ª—Å)
‚úÖ –ü—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
‚úÖ –ë–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

---

## ü§ñ –ö–∞–∫ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ—Ç—ã

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
```json
{
  "user_token": "bot_alex",
  "nickname": "–ê–ª–µ–∫—Å",
  "message": "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!",
  "type": "world",
  "is_bot": true
}
```

### –í –≤–∞—à–µ–º —á–∞—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è:
```
üòé –ê–ª–µ–∫—Å: –ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏:
```sql
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'world_chat_messages';
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- user_token
- nickname
- message
- type
- **is_bot** ‚Üê –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞
- created_at

### 2. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:
```sql
SELECT nickname, message, is_bot 
FROM world_chat_messages 
WHERE is_bot = true 
ORDER BY created_at DESC 
LIMIT 10;
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤!

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –±–æ—Ç—ã –±—É–¥—É—Ç:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `world_chat_messages`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∫–Ω–µ–π–º—ã (–ê–ª–µ–∫—Å, –ú–∞—Ä–∏—è, –î–∏–º–∞, –ö–∞—Ç—è, –ê—Ä—Ç—ë–º)
- ‚úÖ –ü–æ–º–µ—á–∞—Ç—å—Å—è –∫–∞–∫ `is_bot = true`
- ‚úÖ –ü–æ—è–≤–ª—è—Ç—å—Å—è –≤ —Ç–∏–ø–µ `world`
- ‚úÖ –û—Ç–≤–µ—á–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é (014_add_is_bot.sql)
2. ‚úÖ –î–µ–ø–ª–æ–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π API
3. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ `test_bot.bat`
4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ `start_activity_bot.bat`
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!

**–í–∞—à–∞ —Ç–∞–±–ª–∏—Ü–∞ –ª—É—á—à–µ –º–æ–µ–π - –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–∞ –æ–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞! üöÄ**
